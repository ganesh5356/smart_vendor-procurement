services:
  # 1. Backend: Spring Boot (using Docker)
  - type: web
    name: spvms-backend
    runtime: docker
    # No rootDir needed because vendor_management is the repository root
    envVars:
      - key: SPRING_DATASOURCE_URL
        sync: false
      - key: SPRING_DATASOURCE_USERNAME
        sync: false
      - key: SPRING_DATASOURCE_PASSWORD
        sync: false
      - key: SPRING_MAIL_USERNAME
        sync: false
      - key: SPRING_MAIL_PASSWORD
        sync: false
      - key: JWT_SECRET
        generateValue: true
      - key: APP_REPORTS_EMAIL
        sync: false
      - key: SERVER_PORT
        value: 8080

  # 2. Frontend: React Static Site
  - type: web
    name: spvms-frontend
    env: static
    rootDir: frontend # Relative to vendor_management
    buildCommand: npm install && npm run build
    staticPublishPath: dist
    envVars:
      - key: VITE_API_BASE_URL
        sync: false # Point this to your backend URL (e.g., https://spvms-backend.onrender.com)
